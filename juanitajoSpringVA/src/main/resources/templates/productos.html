<!DOCTYPE html>
<html lang="es" dir="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="fontawesome/css/all.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oswald|Montserrat&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/estiloGlobal.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<title>Juanita Jo | Lista de Productos</title>
</head>

<body>
<div class="contengoTodo">

<h2 th:if="${mensaje != null}" th:text="${mensaje}"></h2>
		<header>
			<div class="contenedorLogoMenu">
		<a href="/home"><img id="logo" src="/img/logo.png" alt="Juanita Jo - Logo"></a></div>
			<div class="contenedorMenu">
          <nav>
          <a href="/usuarios/all">CLIENTES</a>
          <a href="/productos/all">PRODUCTOS</a>
          <a href="/faq">FAQ</a>
          <a href="/contact">CONTACTO</a>
          <a href="/carrito">CARRITO</a>
          </nav>
			</div>
		</header>
		<main class="contenedorProductos">
		<a class="botonRegistrar2" href="/productos/add"><img src="/img/newProduct.png" alt="IMG editar"></a>
		
			
	<h1>Lista de todos los Productos</h1>
	<table class="table table-striped">
		<thead class="thead-light">
			<tr>
				<th scope="col">Categoría</th>
				<th scope="col">ID</th>
				<th scope="col">Foto</th>
				<th scope="col">Nombre</th>
				<th scope="col">Descripción</th>
				<th scope="col">Color</th>
				<th scope="col">Precio</th>
				<th scope="col">Stock</th>
				<th scope="col">Editar</th>
				<th scope="col">Borrar</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="unProducto:${listaDeProductos}">
				<td scope="row" th:text="${(unProducto.categoria != null ? unProducto.categoria.nombre : 'No tiene')}"></td>
				<td th:text="${unProducto.id}"></td>
				<td><img th:src="${unProducto.fotoProd != null} ? @{'/img/'+${unProducto.fotoProd}} : @{/img/prodSinFoto.png}" width="200px"/></td>
				<!-- <td th:text="${(unProducto.categoria != null ? unProducto.categoria.nombre : 'No tiene')}"></td> -->
				<td th:text="${unProducto.nombre}"></td>
				<td th:text="${unProducto.descripcion}"></td>
				<td th:text="${unProducto.color!=null ? unProducto.color.nombre : 'no hay por qué'}"></td>
				<td th:text="${unProducto.precio}"></td>
				<td th:text="${unProducto.stock}"></td>
								
				<td><a class="botonRegistrar2" th:href="@{'/productos/edit/'+${unProducto.id}}"><img src="/img/editIcon.png" alt="IMG editar"></a></td>
							
			<td><form class="" method="POST" th:action="@{'/productos/delete/'+${unProducto.id}}">
			<button class="botonRegistrar2" type="submit" name="borrarProd" value="borrarProd"><img src="/img/eraseIcon.png" alt="IMG eliminar"></button>
			</form></td>
		</tbody>
	</table>

	<!-- Optional JavaScript 
	 jQuery first, then Popper.js, then Bootstrap JS 
	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
		integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
		crossorigin="anonymous"></script>-->
			</main>
		<footer>
			<div class="footerIconitosBellos">
				<div class="footercontengoIconitosBellos">
					<div class="contengoIconitoFooter">
						<img src="/img/footer1.jpg" alt="Envío a domicilio a todo el país">
						<p class="pIconitos">
							<span>ENVÍOS A TODO EL PAÍS</span>
						</p>
					</div>
					<div class="contengoIconitoFooter">
						<img src="/img/footer2.jpg" alt="Encontrá todas nuestras tiendas">
						<p class="pIconitos">
							<span><a href="contact">ENCONTRÁ
									NUESTRAS TIENDAS</a></span>
						</p>
					</div>
					<div class="contengoIconitoFooter">
						<img src="/img/footer3.jpg" alt="Formá parte de Juanita Jo">
						<p class="pIconitos">
							<span>FORMÁ PARTE DE JUANITA JO</span>
						</p>
					</div>
					<div class="contengoIconitoFooter">
						<img src="/img/footer4.jpg" alt="Contacto Mayoristas">
						<p class="pIconitos">
							<span>CONTACTO PARA MAYORISTAS</span>
						</p>
					</div>
				</div>
			</div>

			<div class="contengoTodoLoDemásDelFooter">

				<div class="footerSeguinos">
					<div class="contengoFooterSeguinos">

						<h3>GRACIAS POR VISITARNOS</h3>
						<h4>REDES SOCIALES:</h4>
						<ul>
							<li><a href="https://www.facebook.com/juanitajofan"><i
									class="fab fa-facebook"></i>Facebook</a></li>
							<li><a href="https://www.instagram.com/juanitajooficial"><i
									class="fab fa-instagram"></i>Instagram</a></li>
							<li><a href="https://twitter.com/juanitajook"><i
									class="fab fa-twitter"></i>Twitter</a></li>
							<li><a
								href="https://api.whatsapp.com/send?phone=541128862455"><i
									class="fab fa-whatsapp"></i>WhatsApp</a></li>
						</ul>
						<a href="perfilCliente">Suscribite a nuestro
							Newsletter</a>
						<form class="suscribiteMini"
							action="perfilCliente" method="post">
							<p><input class="inputEmailSus" type="email" name="email" value=""
								placeholder="tumail@mail.com" required>
							<button class="botonSuscribir" type="submit">Enviar</button>
							</p>
							<p class="pSuscribir">
								<span class="errorEmailSus"></span>
							</p>
						</form>
					</div>

				</div>


				<div class="footerMapaDelSitio">
					<div class="contengoFooterMapaDelSitio">
						<ul>
							<h3>MAPA DEL SITIO</h3>
							<li><a href="/home"> HOME</a></li>
							<li><a href="/faq"> FAQ</a></li>
							<li><a href="/usuarios/add"> REGISTRATE</a></li>
							<li><a href="/login"> LOGIN</a></li>
							<li><a href="/contact"> CONTACTO</a></li>
							<li><a href="/perfilCliente"> MI PERFIL</a></li>
						</ul>
					</div>
				</div>

				<div class="footerInfo">
					<div class="contengoFooterInfo">
						<p>Juanita Jo es una marca registrada, © 2019.</p>
						<p>
							<a href="https://juanitajo.com">https://juanitajo.com</a>
						<p>Diseño y desarrollo por TUVI!</p>
					</div>
				</div>
			</div>

		</footer>
	</div>

	<script>
		window
				.addEventListener(
						"load",
						function() {

							var botSuscribir = document
									.querySelector("button.botonSuscribir");

							botSuscribir
									.addEventListener(
											'click',
											function(evento) {
												var email = document
														.querySelector("input.inputEmailSus");
												var errorEmail = document
														.querySelector("span.errorEmailSus");
												var regexEmail = /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;

												if (regexEmail
														.test(email.value)) {
													errorEmail.innerHTML = "";
													email.style.border = "1px solid grey";
													errorEmail.style.color = "green";
													posiblesErrores = false;
													if (checkBoxR.checked == true) {
														var rememberEmail = email.value;
													}
												} else if (email.value == "") {
													evento.preventDefault();
													errorEmail.innerHTML = "Tu email es <strong>obligatorio</strong>.";
													email.style.border = "1px solid red";
													errorEmail.style.color = "red";
													posiblesErrores = true;
												} else {
													evento.preventDefault();
													errorEmail.innerHTML = "Tu email <strong>no</strong> es válido.";
													email.style.border = "1px solid red";
													errorEmail.style.color = "red";
													posiblesErrores = true;
												}
											});
						});
	</script>
</body>
</html>